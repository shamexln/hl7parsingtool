import{a as xe,b as V,h as be}from"./chunk-IVREERM6.js";import{a as L,c as we,d as N,f as Re}from"./chunk-ALHQIKHA.js";import{Aa as oe,Ba as b,Cc as v,Db as S,Dc as he,E as J,F as E,Fa as u,Gc as ge,Hc as Ce,Ja as ie,La as f,Mb as ue,Nc as T,Oc as ve,P as K,Pc as Me,Q as W,Qa as w,Ra as ne,S as ee,Sc as $,T as h,Ta as se,Tc as De,Ua as ae,Va as l,Wa as c,Wc as ye,X as I,Xa as j,Zc as y,a as X,aa as _,ba as A,cb as R,cd as B,dd as _e,eb as O,ed as z,f as Y,fb as M,gb as D,hb as de,i as k,ic as F,jb as re,kb as le,kc as C,l as a,lc as m,m as d,ob as ce,pc as fe,qa as p,qb as me,ra as te,wb as pe,za as g}from"./chunk-PQW76BEZ.js";var Ee=[[["button","odxButton",""],["a","odxButton",""]]],Ie=["button[odxButton], a[odxButton]"],Se=(()=>{let e=class G{constructor(){this.element=v(),this.alignRight=!1,this.block=!1,this.vertical=!1,this.reverse=!1}static{this.\u0275fac=function(o){return new(o||G)}}static{this.\u0275cmp=g({type:G,selectors:[["odx-button-group"]],inputs:{alignRight:[2,"alignRight","alignRight",S],block:[2,"block","block",S],vertical:[2,"vertical","vertical",S],reverse:[2,"reverse","reverse",S]},ngContentSelectors:Ie,decls:1,vars:0,template:function(o,i){o&1&&(M(Ee),D(0))},encapsulation:2,changeDetection:0})}};return a([m(),d("design:type",Object)],e.prototype,"alignRight",void 0),a([m(),d("design:type",Object)],e.prototype,"block",void 0),a([m(),d("design:type",Object)],e.prototype,"vertical",void 0),a([m(),d("design:type",Object)],e.prototype,"reverse",void 0),e=a([C("button-group")],e),e})();var Be=["*"],Ae=[[["odx-area-header"]]],Te=["odx-area-header"];function Ve(e,s){e&1&&(l(0,"odx-action-group",0)(1,"button",1),j(2,"odx-icon",2),c()())}function ze(e,s){if(e&1&&j(0,"odx-icon",0),e&2){let t=O();f("name",t.icon)("iconSet",t.iconSet)}}function Le(e,s){e&1&&(l(0,"odx-action-group",2)(1,"button",3),j(2,"odx-icon",4),c()())}function Ne(e,s){}function Ge(e,s){if(e&1&&(l(0,"odx-modal-hero",0),u(1,Ne,0,0,"ng-template",3),c()),e&2){let t=O();f("icon",s)("variant",t.data.heroVariant),p(),f("odxDynamicView",t.data.title)}}function Ue(e,s){}function Pe(e,s){if(e&1&&(l(0,"odx-modal-header")(1,"odx-area-header"),u(2,Ue,0,0,"ng-template",3),c()()),e&2){let t=O();p(2),f("odxDynamicView",t.data.title)}}function Qe(e,s){}function qe(e,s){if(e&1&&(l(0,"button",2),ce(1),c()),e&2){let t=s.$implicit;f("variant",t.variant)("odxModalClose",t.data),p(),me(" ",t.label," ")}}var Ze=["odx-dialog-modal",""],Xe=()=>({});function Ye(e,s){}var H=class extends De{get id(){return this.options.id}get modalTitleId(){return`${this.options.id}-title`}get data(){return this.internalOptions.data}get options(){return this.internalOptions}constructor(s,t){super(),this.internalOptions=s,this.onClose$$=new k,this.onDismiss$$=new k,this.onClose$=this.onClose$$.pipe(E({resetOnRefCountZero:!0})),this.onDismiss$=this.onDismiss$$.pipe(E({resetOnRefCountZero:!0})),this.onDestroy$=F(this.onClose$,this.onDismiss$),this.isActive=()=>t(this)}update(s){this.internalOptions=F(this.internalOptions,s),this.triggerControllerChange()}dismiss(s=!1){!s&&!this.isActive()||this.options.canDismiss?.(this.data)!==!1&&(this.onDismiss$$.next(),this.destroy())}close(s){this.isActive()&&this.options.canClose?.(this.data)!==!1&&(this.onClose$$.next(s),this.destroy())}destroy(){this.onClose$$.complete(),this.onDismiss$$.complete()}},He={XSMALL:"xsmall",SMALL:"small",MEDIUM:"medium",LARGE:"large"},Je={DEFAULT:"default",SIDESHEET:"sidesheet"};function x(){return h(H)}function Ke(e){return{provide:H,useValue:e}}var We=(()=>{class e{constructor(){this.modalRef=x(),this.result=null}onClick(){let t=this.result===""?null:this.result;t===void 0?this.modalRef.dismiss():this.modalRef.close(t??null)}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275dir=b({type:e,selectors:[["","odxModalClose",""]],hostBindings:function(o,i){o&1&&R("click",function(){return i.onClick()})},inputs:{result:[0,"odxModalClose","result"]}})}}return e})(),et=(()=>{let e=class U{constructor(){this.element=v()}static{this.\u0275fac=function(o){return new(o||U)}}static{this.\u0275dir=b({type:U,selectors:[["odx-modal-content"]]})}};return e=a([C("modal__content")],e),e})(),je=(()=>{class e{constructor(){this.modalRef=x()}onClick(){this.modalRef.dismiss()}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275dir=b({type:e,selectors:[["","odxModalDismiss",""]],hostBindings:function(o,i){o&1&&R("click",function(){return i.onClick()})}})}}return e})();var tt=(()=>{let e=class P{constructor(){this.element=v()}static{this.\u0275fac=function(o){return new(o||P)}}static{this.\u0275cmp=g({type:P,selectors:[["odx-modal-footer"]],ngContentSelectors:Be,decls:1,vars:0,template:function(o,i){o&1&&(M(),D(0))},encapsulation:2,changeDetection:0})}};return e=a([C("modal__footer")],e),e})(),Oe=(()=>{let e=class Q{constructor(){this.modalRef=x(),this.element=v(),$(this.modalRef).subscribe()}ngAfterContentInit(){this.areaHeaderComponent&&(this.areaHeaderComponent.size=we.MEDIUM)}static{this.\u0275fac=function(o){return new(o||Q)}}static{this.\u0275cmp=g({type:Q,selectors:[["odx-modal-header"]],contentQueries:function(o,i,n){if(o&1&&de(n,N,5),o&2){let r;re(r=le())&&(i.areaHeaderComponent=r.first)}},ngContentSelectors:Te,decls:2,vars:1,consts:[[1,"odx-modal__dismiss"],["odxButton","","odxModalDismiss",""],["name","close","iconSet","core"]],template:function(o,i){o&1&&(M(Ae),D(0),u(1,Ve,3,0,"odx-action-group",0)),o&2&&(p(),w(i.modalRef.options.dismissable?1:-1))},dependencies:[y,L,B,z,je],encapsulation:2,changeDetection:0})}};return e=a([C("modal__header"),d("design:paramtypes",[])],e),e})(),Fe=(()=>{let e=class q{constructor(){this.element=v(),this.modalRef=x(),this.iconSet=_e.CORE,$(this.modalRef).subscribe()}static{this.\u0275fac=function(o){return new(o||q)}}static{this.\u0275cmp=g({type:q,selectors:[["odx-modal-hero"]],inputs:{icon:"icon",iconSet:"iconSet",variant:"variant"},ngContentSelectors:Be,decls:4,vars:2,consts:[["size","xlarge",1,"odx-modal-hero__icon",3,"name","iconSet"],[1,"odx-modal-hero__title","odx-heading-4"],[1,"odx-modal-hero__dismiss"],["odxButton","","odxModalDismiss",""],["name","close","iconSet","core"]],template:function(o,i){o&1&&(M(),u(0,ze,1,2,"odx-icon",0),l(1,"div",1),D(2),c(),u(3,Le,3,0,"odx-action-group",2)),o&2&&(w(i.icon?0:-1),p(3),w(i.modalRef.options.dismissable?3:-1))},dependencies:[y,L,B,z,je],encapsulation:2,changeDetection:0})}};return a([m(),d("design:type",Object)],e.prototype,"variant",void 0),e=a([C("modal-hero"),d("design:paramtypes",[])],e),e})(),ot=(()=>{class e{constructor(){this.injector=h(_),this.modalRef=x()}get data(){return this.modalRef.data}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=g({type:e,selectors:[["odx-basic-modal"]],decls:7,vars:3,consts:[[3,"icon","variant"],[3,"odxDynamicView","odxDynamicViewInjector"],["odxButton","",3,"variant","odxModalClose"],[3,"odxDynamicView"]],template:function(o,i){if(o&1&&(u(0,Ge,2,3,"odx-modal-hero",0)(1,Pe,3,1,"odx-modal-header"),l(2,"odx-modal-content"),u(3,Qe,0,0,"ng-template",1),c(),l(4,"odx-modal-footer"),se(5,qe,2,3,"button",2,ne),c()),o&2){let n;w((n=i.data.heroIcon)?0:1,n),p(3),f("odxDynamicView",i.data.content)("odxDynamicViewInjector",i.injector),p(2),ae(i.data.actions)}},dependencies:[y,V,B,N,Oe,Fe,tt,et,We],encapsulation:2,changeDetection:0})}}return e})(),$e=(()=>{let e=class Z{constructor(){this.modalRef=x(),this.injector=h(_),this.context={$implicit:this.modalRef},this.element=v(),this.size=this.modalRef.options.size,this.variant=this.modalRef.options.variant,this.withComponent=!1,$(this.modalRef).subscribe(()=>{this.size=this.modalRef.options.size})}ngOnChanges(t){T(t,"content",!1)&&(this.withComponent=!fe(this.content))}preventNativeDismiss(t){t.key==="Escape"&&(t.preventDefault(),this.modalRef.options.dismissable&&this.modalRef.destroy())}handleDialogClose({target:t}){t===this.element.nativeElement&&this.modalRef.dismiss()}static{this.\u0275fac=function(o){return new(o||Z)}}static{this.\u0275cmp=g({type:Z,selectors:[["dialog","odx-dialog-modal",""]],hostVars:3,hostBindings:function(o,i){o&1&&R("keydown",function(r){return i.preventNativeDismiss(r)})("cancel",function(r){return i.handleDialogClose(r)})("close",function(r){return i.handleDialogClose(r)}),o&2&&ie("id",i.modalRef.options.id)("aria-labelledby",i.modalRef.modalTitleId)("role","dialog")},inputs:{content:"content"},features:[I],attrs:Ze,decls:2,vars:5,consts:[[1,"odx-modal__container",3,"odxClickOutside","odxClickOutsideActive"],[3,"odxDynamicView","odxDynamicViewContext","odxDynamicViewInjector"]],template:function(o,i){o&1&&(l(0,"div",0),R("odxClickOutside",function(){return i.modalRef.dismiss()}),u(1,Ye,0,0,"ng-template",1),c()),o&2&&(f("odxClickOutsideActive",i.modalRef.isActive()&&i.modalRef.options.dismissable&&i.modalRef.options.interactiveBackdrop),p(),f("odxDynamicView",i.content)("odxDynamicViewContext",i.withComponent?pe(4,Xe):i.context)("odxDynamicViewInjector",i.injector))},dependencies:[be,ye,y,V],encapsulation:2,changeDetection:0})}};return a([m(),d("design:type",Object)],e.prototype,"size",void 0),a([m(),d("design:type",Object)],e.prototype,"variant",void 0),a([m(),d("design:type",Object)],e.prototype,"withComponent",void 0),e=a([C("modal"),d("design:paramtypes",[])],e),e})(),{ModalDefaultConfig:Vt,ModalConfig:zt,injectModalConfig:it,provideModalConfig:Lt}=ve("Modal","@odx/angular/components/modal",{dismissable:!0,size:He.MEDIUM,dismissOnNavigation:!0,interactiveBackdrop:!0,variant:Je.DEFAULT}),nt=(()=>{class e{constructor(t){this.config=it(),this.openModals=new Me,this.injector=h(_),this.dynamicViewService=h(xe),this.openModals$=this.openModals.value$,t.onUrlChange(()=>{for(let o of this.openModals.toArray())o.options.dismissOnNavigation&&o.destroy()})}dismissAll(){for(let t of this.openModals.toArray())t.dismiss()}getModalById(t){return this.openModals.get(t)}create(t,o){return this.open(ot,X({data:t,size:He.SMALL},o))}open(t,o){let i=F(this.config,{id:Ce("odx-modal")},o??{});if(this.getModalById(i.id))throw Error(`Modal with ID ${i.id} already open`);let n=new H(i,r=>this.openModals.isFirst(r));return this.attachModal(n,t),this.openModals.add(n),n}attachModal(t,o){let i=this.dynamicViewService.createView($e,{context:{content:o},injector:_.create({providers:[Ke(t)],parent:this.injector}),host:t.options.host}),n=i.getElement(),r=()=>Y(this,null,function*(){n?.classList.add("is-hidden"),yield he(n),n?.close(),this.openModals.remove(t),i.destroy()});t.onDestroy$.pipe(J(r)).subscribe(),ge(()=>{n?.isConnected&&n?.showModal()})}static{this.\u0275fac=function(o){return new(o||e)(ee(ue))}}static{this.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Nt=(()=>{class e{constructor(){this.modalService=h(nt),this.modalRef=null,this.template=h(te),this.modalClose=new A,this.modalDismiss=new A}ngOnChanges(t){T(t,"modalOptions")&&this.modalOptions&&this.modalRef?.update(this.modalOptions)}ngOnDestroy(){this.dismiss()}open(){this.modalRef=this.modalService.open(this.template,this.modalOptions||{}),this.modalRef.onClose$.subscribe(t=>this.modalClose.next(t)),this.modalRef.onDismiss$.subscribe(t=>this.modalDismiss.next(t))}dismiss(){this.modalRef?.dismiss()}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275dir=b({type:e,selectors:[["ng-template","odxModal",""]],inputs:{modalOptions:[0,"odxModal","modalOptions"]},outputs:{modalClose:"odxModalClose",modalDismiss:"odxModalDismiss"},exportAs:["odxModal"],features:[I]})}}return e})();var Gt=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=oe({type:e})}static{this.\u0275inj=W({imports:[B,Se,$e,Oe,Fe,y,Re]})}}return e})();export{He as a,We as b,et as c,tt as d,Fe as e,Nt as f,Gt as g};
