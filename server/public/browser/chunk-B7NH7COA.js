import{a as E}from"./chunk-ZIXO3TMD.js";import{i as s,k as P}from"./chunk-I5SXR335.js";import{g as z}from"./chunk-IVREERM6.js";import{a as R}from"./chunk-ALHQIKHA.js";import{Aa as b,Ba as F,Cc as p,Db as L,Ea as u,Fa as _,Nc as O,P as D,Q as y,Qa as A,S as r,Sb as j,T as w,Va as c,Wa as d,X as C,Zc as N,a as h,b as g,ca as x,cb as S,cc as T,ed as k,fb as H,gb as m,kc as l,l as o,lc as B,m as M,za as I}from"./chunk-PQW76BEZ.js";var Z=class t{constructor(i,e,n){this.zone=i;this.auth=e;this.router=n}timeoutHandle=null;lastActivity=Date.now();minutes=0;initialized=!1;init(){this.initialized||(this.initialized=!0,this.minutes=this.readMinutes(),this.zone.runOutsideAngular(()=>{let i=()=>this.onActivity();window.addEventListener("mousemove",i,{passive:!0}),window.addEventListener("mousedown",i,{passive:!0}),window.addEventListener("keydown",i,{passive:!0}),window.addEventListener("touchstart",i,{passive:!0}),window.addEventListener("scroll",i,{passive:!0})}),this.resetTimer())}update(i){(typeof i!="number"||i<0||!isFinite(i))&&(i=0),this.minutes=Math.floor(i);try{localStorage.setItem("autoLogoffMinutes",String(this.minutes))}catch{}this.resetTimer()}readMinutes(){try{let i=localStorage.getItem("autoLogoffMinutes"),e=i==null?0:Number(i);return Number.isFinite(e)&&e>=0?Math.floor(e):0}catch{return 0}}onActivity(){this.lastActivity=Date.now(),this.minutes>0&&this.resetTimer()}clearTimer(){this.timeoutHandle&&(clearTimeout(this.timeoutHandle),this.timeoutHandle=null)}resetTimer(){if(this.clearTimer(),this.minutes<=0)return;let e=this.minutes*60*1e3-(Date.now()-this.lastActivity),n=e>0?e:0;this.timeoutHandle=setTimeout(()=>{this.auth.isLoggedIn&&this.zone.run(()=>{this.auth.logout().subscribe(()=>{try{sessionStorage.setItem("autoLogoffReason","inactive")}catch{}this.router.navigate(["/login"])})})},n)}static \u0275fac=function(e){return new(e||t)(r(x),r(E),r(T))};static \u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})};var G=[[["","odxButton",""]],"*"],V=["[odxButton]","*"];function W(t,i){t&1&&(c(0,"div",0),m(1,1),d())}var q=(()=>{let t=class f{constructor(){this.element=p(),this.tile=!1}onTab(e){e.preventDefault(),e.stopPropagation(),P(this.element.nativeElement)}static{this.\u0275fac=function(n){return new(n||f)}}static{this.\u0275cmp=I({type:f,selectors:[["odx-menu"]],hostAttrs:["role","menu"],hostBindings:function(n,a){n&1&&S("keydown.tab",function(U){return a.onTab(U)})},inputs:{tile:[2,"tile","tile",L]},features:[u([z])],ngContentSelectors:V,decls:3,vars:1,consts:[[1,"odx-menu__title"],[1,"odx-menu__inner"]],template:function(n,a){n&1&&(H(G),_(0,W,2,0,"div",0),c(1,"odx-action-group",1),m(2,0,["ngProjectAs","[odxButton]",5,["","odxButton",""]]),d()),n&2&&A(a.tile?0:-1)},dependencies:[R,j],encapsulation:2,changeDetection:0})}};return o([B(),M("design:type",Object)],t.prototype,"tile",void 0),t=o([l("menu")],t),t})(),J={containerClass:"odx-menu-overlay",enableFallback:!0},ye=(()=>{let t=class v{constructor(){this.dropdown=w(s,{host:!0}),this.element=p()}ngOnChanges(e){O(e,"position",!1)&&(this.dropdown.options=g(h({},J),{position:this.position??void 0}))}isOpen(){return this.dropdown.isOpen}close(e){this.dropdown.close(e)}static{this.\u0275fac=function(n){return new(n||v)}}static{this.\u0275dir=F({type:v,selectors:[["","odxMenu",""]],inputs:{content:[0,"odxMenu","content"],position:[0,"odxMenuPosition","position"]},exportAs:["odxMenu"],features:[u([{directive:s,inputs:["odxDropdown","odxMenu"]}]),C]})}};return t=o([l("menu-host")],t),t})();var we=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=b({type:t})}static{this.\u0275inj=y({imports:[q,k,N]})}}return t})();export{q as a,ye as b,we as c,Z as d};
